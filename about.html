<!DOCTYPE html><!--
  This file is a part of Piping
  (c) 2014 TymoonNET/NexT http://tymoon.eu (shinmera@tymoon.eu)
  Author: Nicolas Hafner <shinmera@tymoon.eu>
  !--><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <title>Piping - About</title>
    <style type="text/css">
      code{font-family: Consolas, Inconsolata, monospace;}
      code.line{margin-left: 20px;}
      code.output{color: #882222;}
      code.output:before{content:"=> ";}
      code a{text-decoration: none; color: blue;}
      h3{display: inline-block;margin:0;padding:0;}
      .docs{list-style: none;}
      .docs li{margin-bottom: 20px;}
      .docs pre{margin: 0 0 0 10px; white-space: pre-wrap;}
    </style>
  </head>
  <body>
    <header>
      <img src="piping-logo.png" alt="Piping"/>
      <h1>v2.0.0</h1>
    </header>
    <div id="content">
      <article>
        <header><h2>What is Piping?</h2></header>
        <p>Piping is a small library providing mechanisms to create message passing pipeline constructs.</p>
      </article>
      <article>
        <header><h2>How To</h2></header>
        <p>
          Load Piping through Quicklisp or ASDF:
        </p>
        <code class="line">(ql:quickload :piping)</code>
        <p>
          Create a pipeline and add some pipe segments:
        </p>
        <code class="line">(defvar *pipeline* (make-instance 'pipeline))</code><br/>
        <code class="line">(add-segment *pipeline* (make-instance 'predicate-filter :predicate #'evenp))</code><br/>
        <code class="line">(add-segment *pipeline* (make-instance 'printer))</code>
        <p>
          Using pass you can then pass items down the pipeline:
        </p>
        <code class="line">(pass *pipeline* 7)</code><br/>
        <code class="line">(pass *pipeline* 6)</code><br/>
        <p>
          Often times you'll want to create pipe branches so to speak, to split off passing and filter for different things:
        </p>
        <code class="line">(add-segment *pipeline* (make-pipe))</code><br/>
        <code class="line">(add-segment *pipeline* (make-instance 'predicate-filter :predicate #'zerop) '(2))</code><br/>
        <code class="line">(add-segment *pipeline* (make-instance 'printer) '(2))</code>
        <p>
          The last argument to <code>add-segment</code> is a place indicator. A place is always a list of indexes, each index specifying the index within the current pipe. <code>add-segment</code> then adds the segment to the end of the pipe, in this case the pipe we added.
        </p>
        <p>
          In order to have easier access to places, you can use <code>set-name</code> to create names for certain places. Do note that modifying the pipeline might change or destroy names. See the each function's docstring for more information.
        </p>
        <p>
          Creating custom pipe segments is just a question of subclassing <code>segment</code> and defining the <code>pass</code> method. If your segment should act like a pipe, you'll have to define methods for <code>find-place</code>, <code>find-parent</code>, <code>insert</code> and <code>withdraw</code> as well.
        </p>
        <p>
          Visualizing the pipeline can be done relatively well by simply printing the main pipe:
        </p>
        <code class="line">(pipeline *pipeline*)</code><br/>
        <code class="line output">#(:FILTER: &gt;&gt;FAUCET #(:FILTER: &gt;&gt;FAUCET))</code>
      </article>
      <article>
        <header><h2>Other Guff</h2></header>
        <p>
          Piping is licensed under the <a href="http://opensource.org/licenses/Artistic-2.0">Artistic License 2.0</a> and Â©2014 TymoonNET/NexT, <a href="http://shinmera.com">Nicolas Hafner</a>.<br/>
          This library can be obtained via git on <a href="https://github.com/Shinmera/piping.git">https://github.com/Shinmera/piping.git</a>. For questions, patches or suggestions, please contact me via <a href="mailto:shinmera@tymoon.eu">email</a> or write a <a href="https://github.com/Shinmera/piping/issues/new">github issue</a>.
        </p>
      </article>
      <article>
        <header><h2><a name="PIPING" href="#PIPING">Piping-API Package Index</a></h2></header>
        <ul id="docs" class="docs"><li id="template">
            <article>
              <a class="anchor" name="ADD-SEGMENT"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#ADD-SEGMENT">ADD-SEGMENT</a></h3>
                  <span class="funcargs">(PIPELINE SEGMENT &amp;OPTIONAL PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Add a new segment to the pipeline.
If place is set, the pipe is added to the specified place as per INSERT.
The place specified is expected to be a splitter or similar to append
the pipe to.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="FAUCET"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#FAUCET">FAUCET</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Base faucet class.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="FILTER"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#FILTER">FILTER</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Base filter class.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="FIND-PARENT"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#FIND-PARENT">FIND-PARENT</a></h3>
                  <span class="funcargs">(SEGMENT PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Same as FIND-PLACE, except it returns the parent of the matched item.
As secondary value it returns the position of the matched item within the parent.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="FIND-PLACE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#FIND-PLACE">FIND-PLACE</a></h3>
                  <span class="funcargs">(SEGMENT PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Searches and returns the segment as designated by PLACE.
A place is a list of signed integers, each denoting the position of the item
within the current splitter or segment. Subsequent numbers descend into the
item matched by the previous number.

As such, (1 4) matches the following:
 ([] () [] [])
      - ([] [] [] [] [] [])
                      ^^</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="INSERT"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#INSERT">INSERT</a></h3>
                  <span class="funcargs">(ITEM PLACE &amp;OPTIONAL POSITION)</span>
                </code>
              </header>
              <pre class="funcdesc">Appends the item to the given place unless a specific position is given.
If position is set, the item is expected to be inserted at the specified position, without
replacing or disturbing any other items.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="INSERT-SEGMENT"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#INSERT-SEGMENT">INSERT-SEGMENT</a></h3>
                  <span class="funcargs">(PIPELINE SEGMENT PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Insert the segment at the given place.
Note that the segment is always inserted into the parent as specified by the place
and found by FIND-PARENT and inserted into the position as per INSERT.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="MAKE-PIPE"/>
              <header>
                <span class="functype">EXTERNAL FUNCTION</span>
                <code>
                  <h3><a class="funcname" href="#MAKE-PIPE">MAKE-PIPE</a></h3>
                  <span class="funcargs">()</span>
                </code>
              </header>
              <pre class="funcdesc">Creates a new splitter array.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="MOVE-PLACE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#MOVE-PLACE">MOVE-PLACE</a></h3>
                  <span class="funcargs">(PIPELINE PLACE NEW-PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Moves a place to another while preserving names.
This attempts to fix names associated with the place or deeper places
by changing their place as well.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="NAMES"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#NAMES">NAMES</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PASS"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#PASS">PASS</a></h3>
                  <span class="funcargs">(SEGMENT MESSAGE)</span>
                </code>
              </header>
              <pre class="funcdesc">Pass a message through a segment.

Note for implementors of this method for custom segments:
You are expected to return a message object, which will be
used for subsequent passing down the current segment. If you
return NIL, passing stops. This does not affect passing in
segments on other splitters. Do note that changing the object
itself directly will of course als be reflected at any other
point in the pipeline passing, so muting the passed object
should be avoided wherever possible.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PIPELINE"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#PIPELINE">PIPELINE</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Base pipeline object that is necessary to orchestrate piping systems.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PIPELINE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#PIPELINE">PIPELINE</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PREDICATE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#PREDICATE">PREDICATE</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PREDICATE-FILTER"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#PREDICATE-FILTER">PREDICATE-FILTER</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Segment that predicate-filters messages according to a predicate function.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PRINT-STREAM"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#PRINT-STREAM">PRINT-STREAM</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="PRINTER"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#PRINTER">PRINTER</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Segment that prints each message it receives.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="REMOVE-PLACE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#REMOVE-PLACE">REMOVE-PLACE</a></h3>
                  <span class="funcargs">(PIPELINE PLACE)</span>
                </code>
              </header>
              <pre class="funcdesc">Removes the given place (as well as its children, if any).
This also removes any names that either match or go through the specified place.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="REPLACE-SEGMENT"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#REPLACE-SEGMENT">REPLACE-SEGMENT</a></h3>
                  <span class="funcargs">(PIPELINE PLACE PIPE)</span>
                </code>
              </header>
              <pre class="funcdesc">Replace a place with a pipe.
This happens simply through REMOVE-PLACE and INSERT-PIPE.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="SEGMENT"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#SEGMENT">SEGMENT</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">Base segment class.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="SET-NAME"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#SET-NAME">SET-NAME</a></h3>
                  <span class="funcargs">(PIPELINE PLACE NAME)</span>
                </code>
              </header>
              <pre class="funcdesc">Associates a place with a name so it can be accessed more easily.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="SPLITTER"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#SPLITTER">SPLITTER</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="SWITCH"/>
              <header>
                <span class="functype">EXTERNAL CLASS</span>
                <code>
                  <h3><a class="funcname" href="#SWITCH">SWITCH</a></h3>
                  <span class="funcargs"></span>
                </code>
              </header>
              <pre class="funcdesc">A switch that only passes to the pipe as set by its current value.</pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="VALUE"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#VALUE">VALUE</a></h3>
                  <span class="funcargs">(OBJECT)</span>
                </code>
              </header>
              <pre class="funcdesc"></pre>
            </article>
          </li><li id="template">
            <article>
              <a class="anchor" name="WITHDRAW"/>
              <header>
                <span class="functype">EXTERNAL GENERIC</span>
                <code>
                  <h3><a class="funcname" href="#WITHDRAW">WITHDRAW</a></h3>
                  <span class="funcargs">(PLACE &amp;OPTIONAL POSITION)</span>
                </code>
              </header>
              <pre class="funcdesc">Removes an item from the place, by default from the end unless position is set.
If position is given, it is expected that the specified item is removed without disturbing any
other items and without leaving any empty spaces within the parent.</pre>
            </article>
          </li></ul>
      </article>
    </div>
  </body>
</html>
